<!DOCTYPE html>
<html>
<head>
    <title>Выбор даты отгула</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        .container {
            padding: 20px;
            max-width: 500px;
            width: 100%;
        }
        input[type="date"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid var(--tg-theme-button-color, #3390ec);
            border-radius: 8px;
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            color: var(--tg-theme-text-color, #000000);
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Выберите дату отгула</h2>
        <input type="date" id="vacationDate" min="">
        <button onclick="sendData()" id="submitButton" disabled>Подтвердить</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // Устанавливаем минимальную дату (сегодня)
        const today = new Date();
        const dateInput = document.getElementById('vacationDate');
        dateInput.min = today.toISOString().split('T')[0];

        // Активируем кнопку только когда дата выбрана
        dateInput.addEventListener('change', function() {
            document.getElementById('submitButton').disabled = !this.value;
        });

        function sendData() {
            const selectedDate = document.getElementById('vacationDate').value;
            if (selectedDate) {
                tg.sendData(JSON.stringify({
                    selected_date: selectedDate
                }));
                tg.close();
            }
        }

        // Включаем кнопку "Назад"
        tg.BackButton.show();
        tg.BackButton.onClick(() => tg.close());
    </script>
</body>
</html>
